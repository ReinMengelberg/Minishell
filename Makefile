CC = cc
CFLAGS = -Wall -Werror -Wextra
NAME = minishell
INCLUDES = -I./libft/includes
LIBFT = libft/libft.a

SRCS =	./src/main/main.c \
		./src/builtin/cd.c \
		./src/builtin/echo.c \
		./src/builtin/exit.c \
		./src/builtin/export.c \
		./src/builtin/pwd.c \
		./src/builtin/unset.c \

OBJ_DIR = objs
OBJS = $(patsubst ./src/%.c,$(OBJ_DIR)/%.o,$(SRCS))

all: $(NAME)

$(OBJ_DIR):
	@mkdir -p $(OBJ_DIR)/main

$(NAME): $(OBJ_DIR) $(OBJS) $(LIBFT)
	$(CC) $(CFLAGS) $(OBJS) $(LIBFT) $(INCLUDES) -o $(NAME)

	@echo " ______     ______     __    __     ______     _____     __     __         __         ______    "
	@echo "/\  __ \   /\  == \   /\ \-./  \   /\  __ \   /\  __-.  /\ \   /\ \       /\ \       /\  __ \   "
	@echo "\ \  __ \  \ \  __<   \ \ \-./\ \  \ \  __ \  \ \ \/\ \ \ \ \  \ \ \____  \ \ \____  \ \ \/\ \  "
	@echo " \ \_\ \_\  \ \_\ \_\  \ \_\ \ \_\  \ \_\ \_\  \ \____-  \ \_\  \ \_____\  \ \_____\  \ \_____\ "
	@echo "  \/_/\/_/   \/_/ /_/   \/_/  \/_/   \/_/\/_/   \/____/   \/_/   \/_____/   \/_____/   \/_____/ "
	@echo ""
	@echo "                                                          .+*: .-=                  "
	@echo "                                                         ++ =+#- *                  "
	@echo "                                                        +:  #:  .+                  "
	@echo "               .........                                * :#.   #:                  "
	@echo "           .+%*:       -+                           .-+*#+*.  :#.                   "
	@echo "        :#+.  =:       -+                        .#+.     : *%#.                    "
	@echo "    .=*=.     =:       -+                      :*-             =%=                  "
	@echo "   =-         =:       -+                    -%:  -+          == .#+                "
	@echo "   =-         =:       -+                 .*+.    ..        .#.    *%=              "
	@echo "   =-         =:       -+              .=*:                .*.  .++. :*.            "
	@echo "   =-         =:       -+             .#.                 .%.:*#.     .%:           "
	@echo "   =-         =:       -+               :-=+===-::.:#.    -*.      .**. #:          "
	@echo "   :++++=-:   =:       -+                           ==    :#  .-+*=.     #. -=-     "
	@echo "         .+.-+#%%%%%@%%%=                           +-     =#:        .=#++.+ +     "
	@echo "   -*======================*                      :%%.  +   +:    -*#=.   *.+ +     "
	@echo "   -=                      *            .::.   .=*:.* .%.   :%=-:.        *+= +     "
	@echo "   -=                      *  :..     =*:. .+%#:.. -=-*    .+*:      .:*#=-@---     "
	@echo "   -=                      * .+ ..:=+#@%*#     ......     += =#===-:..    -%:*:     "
	@echo " ++*#++++++++++++++++++++++%+*#+++++++++*#*++*=:.      .=*.  =+          :*%.@.     "
	@echo " +                                        .+    .-+@**=.     =%%##**#%%*- *#.%      "
	@echo " %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%##%%%%%%%+       +##+=-:   -+          .#+-+      "
	@echo "   -- #.                             == *.       -*.         .@*++=---=+*%*-=-      "
	@echo "   -- #.                             == *.      ==            ==        *-*.*       "
	@echo "   -- #.                             == *.     .*              :#:    .#: * +       "
	@echo "   -- #.                             == *.     :+    :+++++++++++#@@%+:=**#**       "
	@echo "   -- #.                             == *.     :+   +-+.            *- :%. .+       "
	@echo "   -- #.                             == *.     .#   * .-*-*=---------#-.:%+*:       "
	@echo "   -- #.                             == *.     .%.  +: .= +.         -= :#=+        "
	@echo "   -- #.                             == *.  :#+.    +: =- *          :*. *-#        "
	@echo "   -- #.                             == *..*+*:- =#-.  #::=          :* .%.%        "
	@echo "   -- #.                             == *. .#%#*-      @ *:          +::#* #.       "
	@echo "   -- #.                             == *.            :# %          *+.+-% *:       "
	@echo "   -- #.                             == *.            -=:*        :*.=#. *.=-       "
	@echo "   -+-%.                             =+-*.            +=+=     :*%**=.   +=+-       "

$(LIBFT):
	make -C libft

$(OBJ_DIR)/%.o: ./src/%.c
	@mkdir -p $(dir $@)
	$(CC) $(CFLAGS) $(INCLUDES) -c $< -o $@

clean:
	rm -f $(OBJ_DIR)
	make -C libft clean

fclean: clean
	rm -f $(NAME)
	make -C libft fclean

re: fclean all
